{"ast":null,"code":"var _jsxFileName = \"/Users/aizatesenbekova/Documents/bitirme projesi/AizatEsenbekova_Graduation_Project/src/components/apartments-list/Apartmenslist.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Modal, ModalHeader, ModalBody, Card, CardBody, Progress, CardHeader, Container, Table, Button, Form, FormGroup } from 'reactstrap';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Apartmenslist = _ref => {\n  _s();\n\n  let {\n    selectedBlock,\n    selectedFloor,\n    ...rest\n  } = _ref;\n  // Modal open state\n  const [modal, setModal] = React.useState(false);\n  const [apartList, setApartList] = useState([]);\n  const [typeList, setTypeList] = useState([]);\n  const [blockList, setBlockList] = useState([]);\n  const [activeFloor, setActiveFloor] = useState(0);\n  const [activeApart, setActiveApart] = useState(0);\n  let [newApartment, setNewApartment] = useState({\n    num_floor: 0,\n    num_apar: 0,\n    status: false,\n    block_id: 0,\n    type_id: 0\n  });\n\n  const runCallback = cb => {\n    return cb();\n  }; // Toggle for Modal\n\n\n  const toggle = () => setModal(!modal);\n\n  useEffect(() => {\n    if (selectedBlock === 0) {\n      axios.get(\"http://localhost:5032/ApartmentDetailsDbOperations\").then(response => {\n        console.log(response.data);\n        setApartList(response.data);\n      });\n    } else {\n      axios.get(\"http://localhost:5032/ApartmentDetailsWithCondition/\" + selectedBlock + \"/\" + selectedFloor).then(response => {\n        console.log(response.data);\n        setApartList(response.data);\n      });\n    }\n\n    axios.get(\"http://localhost:5032/BlockDbOperations\").then(response => {\n      console.log(response.data);\n      setBlockList(response.data);\n    });\n    axios.get(\"http://localhost:5032/Type_RoomsDbOperations\").then(response => {\n      console.log(response.data);\n      setTypeList(response.data);\n    });\n  }, [selectedBlock, selectedFloor]); //run when selectedBlock and selected floor change\n\n  const handleChange = event => {\n    const name = event.target.name;\n    const value = event.target.value;\n    console.log(value);\n    newApartment[name] = value;\n    setNewApartment(newApartment);\n  }; //get selected block\n\n\n  const blockChecked = event => {\n    const value = event.target.value;\n    console.log(event.target.value);\n    const selected = blockList.filter(ch => ch.block_name === value);\n    setActiveFloor(selected[0].num_floors);\n    setActiveApart(selected[0].num_flats);\n    handleChange(event);\n  }; //save new aparts values\n\n\n  let save = event => {\n    event.preventDefault();\n    console.log(newApartment);\n    const _block = {\n      num_floor: parseInt(newApartment.num_floor),\n      num_apar: parseInt(newApartment.num_apar),\n      status: newApartment.status,\n      block_id: blockList.filter(ch => ch.block_name === newApartment.block_id)[0].block_id,\n      type_id: typeList.filter(ch => ch.type_name === newApartment.type_id)[0].type_id\n    };\n    console.log(_block);\n    const axiosConfig = {\n      headers: {\n        'Content-Type': 'application/json;charset=UTF-8',\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    };\n    axios.post(`http://localhost:5032/ApartmentDbOperations`, _block, axiosConfig).then(res => {\n      console.log(res);\n      console.log(res.data);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"card-container\",\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"d-flex justify-content-between align-items-center text-start\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Apartmens\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex w-50 progress-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-75\",\n              children: /*#__PURE__*/_jsxDEV(Progress, {\n                value: \"25\",\n                children: \"25%\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"progress-title\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 60\n              }, this), \"/100\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              color: \"success\",\n              size: \"sm\",\n              onClick: toggle,\n              children: \"Add Apartment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            borderless: true,\n            hover: true,\n            responsive: true,\n            striped: true,\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Block\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Floor number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Apartment Number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Type Rooms\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Resident's full name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: apartList.map((apart, index) => {\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"row\",\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: apart.block_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: apart.floor_num\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: apart.apart_num\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: apart.type_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [apart.r_name, \" \", apart.r_surname]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 29\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      fullscreen: \"md\",\n      size: \"lg\",\n      isOpen: modal,\n      toggle: toggle,\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        toggle: toggle,\n        children: \"Add Apartment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          inline: true,\n          onSubmit: save,\n          children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown bootstrap-select form-control\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"block_id\",\n                className: \"selectpicker form-control\",\n                onChange: blockChecked,\n                children: blockList.map(block => {\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: block.block_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 36\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 7\n          }, this), ' ', /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown bootstrap-select form-control\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"num_floor\",\n                className: \"selectpicker form-control\",\n                onChange: handleChange,\n                children: runCallback(() => {\n                  const option = [];\n\n                  for (let i = 1; i <= activeFloor; i++) {\n                    option.push( /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: i,\n                      children: [\"Floor \", i]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 34\n                    }, this));\n                  }\n\n                  return option;\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 7\n          }, this), ' ', /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown bootstrap-select form-control\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"num_apar\",\n                className: \"selectpicker form-control\",\n                onChange: handleChange,\n                children: runCallback(() => {\n                  const option1 = [];\n\n                  for (let i = 1; i <= activeApart; i++) {\n                    option1.push( /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: i,\n                      children: [\"Apart \", i]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 262,\n                      columnNumber: 42\n                    }, this));\n                  }\n\n                  return option1;\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 7\n          }, this), ' ', /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown bootstrap-select form-control\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"type_id\",\n                className: \"selectpicker form-control\",\n                onChange: handleChange,\n                children: typeList.map(type => {\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: type.type_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 36\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 7\n          }, this), ' ', /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between w-50 m-auto\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              color: \"success\",\n              children: \"Add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: toggle,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Apartmenslist, \"R0y+CMrF+yuPyVsaz1DCnjbW8No=\");\n\n_c = Apartmenslist;\nexport default Apartmenslist;\n\nvar _c;\n\n$RefreshReg$(_c, \"Apartmenslist\");","map":{"version":3,"sources":["/Users/aizatesenbekova/Documents/bitirme projesi/AizatEsenbekova_Graduation_Project/src/components/apartments-list/Apartmenslist.js"],"names":["React","useEffect","useState","Modal","ModalHeader","ModalBody","Card","CardBody","Progress","CardHeader","Container","Table","Button","Form","FormGroup","axios","Apartmenslist","selectedBlock","selectedFloor","rest","modal","setModal","apartList","setApartList","typeList","setTypeList","blockList","setBlockList","activeFloor","setActiveFloor","activeApart","setActiveApart","newApartment","setNewApartment","num_floor","num_apar","status","block_id","type_id","runCallback","cb","toggle","get","then","response","console","log","data","handleChange","event","name","target","value","blockChecked","selected","filter","ch","block_name","num_floors","num_flats","save","preventDefault","_block","parseInt","type_name","axiosConfig","headers","post","res","map","apart","index","floor_num","apart_num","r_name","r_surname","block","option","i","push","option1","type"],"mappings":"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","sourcesContent":["import React ,{ useEffect, useState} from 'react';\nimport { Modal,ModalHeader,ModalBody,Card, CardBody, Progress,CardHeader, Container,Table,Button,Form,FormGroup} from 'reactstrap';\nimport axios from 'axios';\n\n\nconst Apartmenslist = ({selectedBlock,selectedFloor,...rest}) => {\n\n        // Modal open state\n        const [modal, setModal] = React.useState(false);\n        const [apartList,setApartList]=useState([]);\n        const [typeList,setTypeList]=useState([]);\n        const [blockList,setBlockList]=useState([]);\n        const [activeFloor, setActiveFloor]= useState(0);\n        const [activeApart, setActiveApart]= useState(0);\n      \n        let [newApartment,setNewApartment]=useState({\n            num_floor:0,\n            num_apar:0,\n            status:false,\n            block_id:0,\n            type_id:0\n        });\n\n        const runCallback = (cb) => {\n            return cb();\n          };\n    \n        // Toggle for Modal\n        const toggle = () => setModal(!modal);\n        useEffect(()=>{\n        if(selectedBlock===0)\n        {\n        axios.get(\"http://localhost:5032/ApartmentDetailsDbOperations\")\n        .then((response)=>{\n        console.log(response.data);\n        setApartList(response.data);\n        });\n        }\n        else\n        {\n            axios.get(\"http://localhost:5032/ApartmentDetailsWithCondition/\"+selectedBlock+\"/\"+selectedFloor)\n            .then((response)=>{\n            console.log(response.data);\n            setApartList(response.data);\n            }); \n        }\n        axios.get(\"http://localhost:5032/BlockDbOperations\")\n        .then((response)=>{\n            console.log(response.data);\n            setBlockList(response.data)\n        });\n\n        axios.get(\"http://localhost:5032/Type_RoomsDbOperations\")\n        .then((response)=>{\n            console.log(response.data);\n            setTypeList(response.data)\n        });\n\n      },[selectedBlock,selectedFloor])//run when selectedBlock and selected floor change\n\n        \n        const handleChange =( event) => {\n            const name=event.target.name;\n            const value=event.target.value;\n            console.log(value);\n            newApartment[name]=value;\n            setNewApartment(newApartment);\n        };\n      \n        //get selected block\n        const blockChecked=(event)=>{\n            const value=event.target.value;\n            console.log(event.target.value);\n            const selected=blockList.filter(ch=>ch.block_name===value);\n            setActiveFloor(selected[0].num_floors);\n            setActiveApart(selected[0].num_flats);\n            handleChange(event);\n          };\n      \n          //save new aparts values\n        let save=event=>{\n          event.preventDefault();\n          console.log(newApartment);\n          const _block={\n              num_floor:parseInt(newApartment.num_floor),\n              num_apar:parseInt(newApartment.num_apar),\n              status:newApartment.status,\n              block_id:blockList.filter((ch)=>ch.block_name=== newApartment.block_id)[0].block_id,\n              type_id:typeList.filter((ch)=>ch.type_name===newApartment.type_id)[0].type_id\n          };\n          console.log(_block);\n        \n         const axiosConfig = {\n            headers: {\n                'Content-Type': 'application/json;charset=UTF-8',\n                \"Access-Control-Allow-Origin\": \"*\",\n            }\n          };\n          axios.post(`http://localhost:5032/ApartmentDbOperations`,_block,axiosConfig)\n          .then(res=>{\n            console.log(res);\n            console.log(res.data);\n          })\n        }\n     \n  return (\n    <div>\n         <Container>\n            <Card className='card-container'>\n                <CardHeader className='d-flex justify-content-between align-items-center text-start'>\n                    <div>Apartmens</div>\n                    \n                    <div className='d-flex w-50 progress-content'>\n                            \n                            <div className='w-75'>\n                                <Progress value=\"25\">\n                                25%\n                                </Progress>\n                               \n                            </div>\n                            <h6 className='progress-title'><span>25</span>/100</h6>\n                       \n                    </div> \n                    <div>\n                            <Button\n                                color=\"success\"\n                                size=\"sm\"\n                                onClick={toggle}\n                            >\n                                Add Apartment\n                            </Button>\n                            \n                     </div>\n\n                </CardHeader>\n                <CardBody>\n                    <div>\n                      \n                    </div>\n                <Table\n                    borderless\n                    hover\n                    responsive\n                    striped\n                    >\n                    <thead>\n                        <tr>\n                        <th>\n                            #\n                        </th>\n                        <th>\n                            Block\n                        </th>\n                        <th>\n                            Floor number\n                        </th>\n                        <th>\n                            Apartment Number\n                        </th>\n                        <th>\n                            Type Rooms\n                        </th>\n                        <th>\n                            Resident's full name\n                        </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {apartList.map((apart,index)=>\n                    {\n                        return(\n                            <tr>\n                            <th scope=\"row\">\n                            {index+1}\n                            </th>\n                            <td>{apart.block_name}</td>\n                            <td>{apart.floor_num}</td>\n                            <td>{apart.apart_num}</td>\n                            <td>{apart.type_name}</td>\n                            <td>{apart.r_name} {apart.r_surname}</td>\n                            </tr>\n                        )\n                    })}\n                      \n                 \n                        \n                        \n                        \n               \n                      \n                    </tbody>\n                    </Table>\n                </CardBody>\n            </Card>\n        </Container>\n        \n       \n\n        <Modal\n    fullscreen=\"md\"\n    size=\"lg\"\n    isOpen={modal}\n    toggle={toggle}\n  >\n    <ModalHeader toggle={toggle}>\n      Add Apartment\n    </ModalHeader>\n    <ModalBody>\n    <Form inline onSubmit={save}>\n\n      <FormGroup >\n        <div className=\"dropdown bootstrap-select form-control\">\n                <select\n                    name='block_id'\n                    className=\"selectpicker form-control\"\n                    onChange={blockChecked}\n                >\n                    {\n                        blockList.map((block)=>{\n                            return <option>{block.block_name}</option>\n                        })\n                    }\n                </select>\n            </div>\n      </FormGroup>\n      {' '}\n      <FormGroup >\n        <div className=\"dropdown bootstrap-select form-control\">\n                <select\n                    name='num_floor'\n                    className=\"selectpicker form-control\"\n                    onChange={handleChange}\n                >   \n                {\n                    runCallback(() => {\n                    const option = [];\n                    for(let i=1; i<=activeFloor; i++)\n                    {\n                     option.push(<option value={i}>Floor {i}</option>);\n                    }\n                    return option;\n                    })\n                 }\n                </select>\n            </div>\n      </FormGroup>\n      {' '}\n      <FormGroup >\n        <div className=\"dropdown bootstrap-select form-control\">\n                <select\n                    name='num_apar'\n                    className=\"selectpicker form-control\"\n                    onChange={handleChange}\n                >\n                {\n                        \n                        runCallback(() => {\n                            const option1 = [];\n                        for(let i=1; i<=activeApart; i++)\n                        {\n                          \n                            option1.push(<option value={i}>Apart {i}</option>);\n                        }\n                        return option1;\n                        })\n                }\n        \n                </select>\n            </div>\n      </FormGroup>\n      {' '}\n \n      <FormGroup >\n        <div className=\"dropdown bootstrap-select form-control\">\n                <select\n                   name='type_id'\n                    className=\"selectpicker form-control\"\n                    onChange={handleChange}>\n                     {\n                        typeList.map((type)=>{\n                            return <option>{type.type_name}</option>\n                        }\n                        )\n                    }\n                </select>\n            </div>\n      </FormGroup>\n      {' '}\n      <div className='d-flex justify-content-between w-50 m-auto'>\n      <Button color=\"success\">\n        Add\n      </Button>\n      <Button onClick={toggle}>\n        Cancel\n      </Button>\n      </div>\n      \n    </Form>\n    </ModalBody>\n\n  </Modal>\n    </div>\n  )\n}\n\nexport default Apartmenslist;\n"]},"metadata":{},"sourceType":"module"}